(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),s=a.n(n),c=a(29),o=a.n(c),i=(a(80),a(12)),l=a(13),h=a(15),j=a(14),m=a(27),u=a(9),d=a(118),p=a(119),b=a(117),O=a(62),f=a(63),x=function(e){localStorage.setItem("userID",e)},g=function(e){localStorage.setItem("token",e)},v=function(){var e=localStorage.getItem("token");if(!e)return!1;var t=e.split(".");return!(t.length<3)&&JSON.parse(atob(t[1]))},w=function(){var e=v();return!!e&&Math.floor(Date.now()/1e3)<e.exp},y=Object(r.jsx)(O.a,{icon:f.a}),C=function(){return Object(r.jsxs)(d.a,{collapseOnSelect:!0,expand:"lg",className:"navbar",children:[Object(r.jsx)(d.a.Brand,{href:"/",children:"REVIVE"}),Object(r.jsx)(d.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(r.jsx)(d.a.Collapse,{id:"responsive-navbar-nav",children:Object(r.jsxs)(p.a,{className:"mr-auto",children:[Object(r.jsx)(p.a.Link,{href:"/",children:"Home"}),Object(r.jsx)(p.a.Link,{href:"/items",children:"Items"}),Object(r.jsxs)(b.a,{title:y,id:"collasible-nav-dropdown",children:[!w()&&Object(r.jsx)(b.a.Item,{href:"/register",children:"Sign Up"}),!w()&&Object(r.jsx)(b.a.Divider,{}),!w()&&Object(r.jsx)(b.a.Item,{href:"/login",children:"Login"}),w()&&Object(r.jsx)(b.a.Item,{href:"/upload",children:"Upload Item"}),w()&&Object(r.jsx)(b.a.Divider,{}),w()&&Object(r.jsx)(b.a.Item,{href:"/",onClick:function(){localStorage.removeItem("userID"),localStorage.removeItem("token")},children:"Logout"})]})]})})]})},D=a(111),S=a(112),k=a(113),I=a(70),N=a(114),L=a(69),E=a.p+"static/media/search.70bab0a2.png",G=a.p+"static/media/message.9f4a5407.png",_=a.p+"static/media/collect.eb2111c2.png",P=function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(D.a,{fluid:!0,className:"about",children:[Object(r.jsx)("h1",{children:"Using Revive is as easy as 123..."}),Object(r.jsx)(S.a,{fluid:!0,className:"about-media-wrapper",children:Object(r.jsxs)(k.a,{children:[Object(r.jsx)(I.a,{xs:12,md:4,children:Object(r.jsx)(N.a,{classname:"about-media",src:E,thumbnail:!0})}),Object(r.jsx)(I.a,{xs:12,md:4,children:Object(r.jsx)(N.a,{classname:"about-media",src:G,thumbnail:!0})}),Object(r.jsx)(I.a,{xs:12,md:4,children:Object(r.jsx)(N.a,{classname:"about-media",src:_,thumbnail:!0})})]})}),Object(r.jsx)(S.a,{className:"about-btn-div",children:Object(r.jsx)(m.b,{to:"/items",children:Object(r.jsx)(L.a,{children:"Browse"})})})]})})},U=function(){return Object(r.jsx)(S.a,{className:"footer",fluid:!0,children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"Contact us"}),Object(r.jsx)("li",{children:"Terms and conditions"})]})})},B=a(7),A=a.n(B),T=a(16),F=a(19),M=a(8),J=a(116),R=a(115),V=a(26),H=a.n(V),q="/api",z=function(){return{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}},K=function(e){return H.a.post("".concat(q,"/items/"),e,z())},Q=function(e){return H.a.get("".concat(q,"/items/").concat(e,"/"))},W=function(e,t){return H.a.post("".concat(q,"/threads/"),t,z())},X=function(e){return H.a.post("".concat(q,"/auth/register/"),e)},Y=function(e){return H.a.post("".concat(q,"/auth/login/"),e)},Z=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={formData:{first_name:"",last_name:"",username:"",email:"",password:"",password_confirmation:""},errors:{}},e.handleChange=function(t){var a=Object(M.a)(Object(M.a)({},e.state.formData),{},Object(F.a)({},t.target.name,t.target.value)),r=Object(M.a)(Object(M.a)({},e.state.errors),{},Object(F.a)({},t.target.name,""));e.setState({formData:a,errors:r})},e.handleSubmit=function(){var t=Object(T.a)(A.a.mark((function t(a){var r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,X(e.state.formData);case 4:r=t.sent,console.log(r),e.props.history.push("/login"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.response),e.setState({errors:t.t0.response.data.errors});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.formData,t=e.first_name,a=e.last_name,n=e.username,s=e.email,c=e.password,o=e.password_confirmation;return Object(r.jsxs)(S.a,{className:"reg-form-wrapper",children:[Object(r.jsx)("h2",{children:"Sign up!"}),Object(r.jsxs)(J.a,{onSubmit:this.handleSubmit,children:[Object(r.jsxs)(J.a.Group,{controlId:"formFirstName",children:[Object(r.jsx)(J.a.Label,{children:"First name"}),Object(r.jsx)(J.a.Control,{type:"firstName",name:"first_name",placeholder:"Enter first name",value:t,onChange:this.handleChange})]}),Object(r.jsxs)(J.a.Group,{controlId:"formLastName",children:[Object(r.jsx)(J.a.Label,{children:"Last name"}),Object(r.jsx)(J.a.Control,{type:"lastName",name:"last_name",placeholder:"Enter last name",value:a,onChange:this.handleChange})]}),Object(r.jsxs)(J.a.Group,{controlId:"formUsername",children:[Object(r.jsx)(J.a.Label,{children:"Username"}),Object(r.jsx)(J.a.Control,{type:"username",name:"username",placeholder:"Enter username",value:n,onChange:this.handleChange})]}),Object(r.jsxs)(J.a.Group,{controlId:"formBasicEmail",children:[Object(r.jsx)(J.a.Label,{children:"Email address"}),Object(r.jsxs)(R.a,{children:[Object(r.jsx)(R.a.Prepend,{children:Object(r.jsx)(R.a.Text,{id:"inputGroupPrepend",children:"@"})}),Object(r.jsx)(J.a.Control,{type:"email",placeholder:"Email",name:"email",value:s,onChange:this.handleChange})]})]}),Object(r.jsxs)(J.a.Group,{controlId:"formBasicPassword",children:[Object(r.jsx)(J.a.Label,{children:"Password"}),Object(r.jsx)(J.a.Control,{type:"password",name:"password",placeholder:"Enter password",value:c,onChange:this.handleChange})]}),Object(r.jsxs)(J.a.Group,{controlId:"formBasicPasswordConfirmation",children:[Object(r.jsx)(J.a.Label,{children:"Password confirmation"}),Object(r.jsx)(J.a.Control,{type:"password",name:"password_confirmation",placeholder:"Enter Password Confirmation",value:o,onChange:this.handleChange}),Object(r.jsx)(J.a.Text,{className:"text-muted"})]}),Object(r.jsx)(L.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}}]),a}(s.a.Component),$=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={formData:{email:"",password:""}},e.handleChange=function(t){var a=Object(M.a)(Object(M.a)({},e.state.formData),{},Object(F.a)({},t.target.name,t.target.value));e.setState({formData:a})},e.handleSubmit=function(){var t=Object(T.a)(A.a.mark((function t(a){var r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,Y(e.state.formData);case 4:r=t.sent,console.log(r),g(r.data.token),x(r.data.userID),e.props.history.push("/items"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0.response),e.setState({errors:t.t0.response.data.errors});case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.formData,t=e.email,a=e.password;return Object(r.jsxs)(S.a,{className:"login-form-wrapper",children:[Object(r.jsx)("h2",{children:"Login!"}),Object(r.jsxs)(J.a,{onSubmit:this.handleSubmit,children:[Object(r.jsxs)(J.a.Group,{controlId:"formBasicEmail",children:[Object(r.jsx)(J.a.Label,{children:"Email address"}),Object(r.jsxs)(R.a,{children:[Object(r.jsx)(R.a.Prepend,{children:Object(r.jsx)(R.a.Text,{id:"inputGroupPrepend",children:"@"})}),Object(r.jsx)(J.a.Control,{type:"email",placeholder:"Email",name:"email",value:t,onChange:this.handleChange})]})]}),Object(r.jsxs)(J.a.Group,{controlId:"formBasicPassword",children:[Object(r.jsx)(J.a.Label,{children:"Password"}),Object(r.jsx)(J.a.Control,{type:"password",placeholder:"Password",name:"password",value:a,onChange:this.handleChange})]}),Object(r.jsx)(L.a,{variant:"primary",type:"submit",children:"Submit"})]})]})}}]),a}(s.a.Component),ee=a(120),te=function(e){var t=e.id,a=e.title,n=e.image;return Object(r.jsxs)(ee.a,{className:"itemcard",children:[Object(r.jsx)(ee.a.Header,{children:a}),Object(r.jsxs)(ee.a.Body,{children:[Object(r.jsx)(N.a,{className:"itemcard-img",src:n}),Object(r.jsx)(m.b,{to:"/items/".concat(t),children:Object(r.jsx)(L.a,{block:!0,className:"itemcard-btn",children:"View Listing"})})]})]})},ae=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={items:null},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(T.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.a.get("".concat(q,"/items/"));case 2:t=e.sent,this.setState({items:t.data}),console.log(t.data);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.items?Object(r.jsxs)(S.a,{className:"itemcard-wrapper",fluid:!0,children:[Object(r.jsx)("h1",{children:"Latest posts"}),Object(r.jsx)(I.a,{children:Object(r.jsx)(k.a,{children:this.state.items.map((function(e){return Object(r.jsx)(te,Object(M.a)({},e),e.id)}))})})]}):null}}]),a}(s.a.Component),re=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={item:"",formData:{id:"",message:""}},e.handleChange=function(t){var a=Object(M.a)(Object(M.a)({},e.state.formData),{},Object(F.a)({},t.target.name,t.target.value));e.setState({formData:a})},e.handleSubmit=function(){var t=Object(T.a)(A.a.mark((function t(a){var r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,e.props.match.params.id,console.log(e.props.match.params),t.next=6,W(0,e.state.formData);case 6:r=t.sent,console.log(r),e.props.history.push("/"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0.response),e.setState({errors:t.t0.response.data.errors});case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(T.a)(A.a.mark((function e(){var t,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,console.log("params",this.props.match.params),e.next=4,Q(t);case 4:a=e.sent,this.setState({item:a.data,id:a.data}),console.log(a.data);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.item,t=e.title,a=e.image,n=e.description,s=e.id;return this.state.item?Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(S.a,{className:"itemshow",fluid:!0,children:[Object(r.jsx)(S.a,{className:"itemshow-title",children:Object(r.jsx)("h1",{children:t})}),Object(r.jsxs)(S.a,{className:"itemshow-wrapper",children:[Object(r.jsx)(N.a,{className:"itemshow-img",src:a}),Object(r.jsxs)(S.a,{className:"itemshow-info",children:[Object(r.jsx)("h4",{children:"User: ".concat(this.state.item.owner.username)}),Object(r.jsx)("p",{children:n}),Object(r.jsx)("h4",{children:"Interested in this item?"}),Object(r.jsxs)("p",{children:["Send ",this.state.item.owner.username," a message"]}),Object(r.jsx)(m.b,{to:"/threads/".concat(s),children:Object(r.jsx)(L.a,{children:"Enquire"})})]})]})]})}):null}}]),a}(s.a.Component),ne="https://api.cloudinary.com/v1_1/knighty/image/upload",se="bkysx5dc",ce=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={image:""},e.handleUpload=function(){var t=Object(T.a)(A.a.mark((function t(a){var r,n;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("file uploaded"),console.log(a.target.files[0]),(r=new FormData).append("file",a.target.files[0]),r.append("upload_preset",se),t.prev=5,t.next=8,H.a.post(ne,r);case 8:n=t.sent,console.log(n),e.setState({image:n.data.secure_url}),console.log(n.data.secure_url),e.props.onChange(n.data.secure_url),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.image!==this.state.image&&this.props.onChange(this.state.image)}},{key:"render",value:function(){var e=this.state.image;return Object(r.jsx)(r.Fragment,{children:e?Object(r.jsx)("img",{src:e,className:"upload-thumbnail"}):Object(r.jsxs)(J.a.Group,{controlId:"formImage",children:[Object(r.jsx)(J.a.Label,{children:"Image"}),Object(r.jsx)(J.a.Control,{type:"file",name:"image",placeholder:"Enter image URL",onChange:this.handleUpload})]})})}}]),a}(s.a.Component),oe=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={formData:{title:"",description:"",image:""},errors:{}},e.handleChange=function(t){var a=Object(M.a)(Object(M.a)({},e.state.formData),{},Object(F.a)({},t.target.name,t.target.value)),r=Object(M.a)(Object(M.a)({},e.state.errors),{},Object(F.a)({},t.target.name,""));e.setState({formData:a,errors:r})},e.handleSubmit=function(){var t=Object(T.a)(A.a.mark((function t(a){var r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,t.next=4,K(e.state.formData);case 4:r=t.sent,console.log(r),e.props.history.push("/items"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.response),e.setState({errors:t.t0.response.data.errors});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleImageChange=function(t){console.log("I have the url",t);var a=Object(M.a)(Object(M.a)({},e.state.formData),{},{image:t});e.setState({formData:a})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.formData,t=e.title,a=e.description;return Object(r.jsxs)(S.a,{className:"upload-form-wrapper",children:[Object(r.jsx)("h2",{children:"Upload an Item!"}),Object(r.jsxs)(J.a,{onSubmit:this.handleSubmit,children:[Object(r.jsx)(ce,{onChange:this.handleImageChange}),Object(r.jsxs)(J.a.Group,{controlId:"formTitle",children:[Object(r.jsx)(J.a.Label,{children:"Title"}),Object(r.jsx)(J.a.Control,{type:"title",name:"title",placeholder:"Enter title",value:t,onChange:this.handleChange})]}),Object(r.jsxs)(J.a.Group,{controlId:"formDescription",children:[Object(r.jsx)(J.a.Label,{children:"Description"}),Object(r.jsx)(J.a.Control,{as:"textarea",rows:8,type:"description",name:"description",placeholder:"Enter description",value:a,onChange:this.handleChange})]}),Object(r.jsx)(L.a,{className:"upload-btn",variant:"primary",type:"submit",children:"Submit"})]})]})}}]),a}(s.a.Component),ie=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={item:"",user:"",formData:{item:"",message:""}},e.handleChange=function(t){var a=Object(M.a)(Object(M.a)({},e.state.formData),{},Object(F.a)({},t.target.name,t.target.value));e.setState({formData:a})},e.handleSubmit=function(){var t=Object(T.a)(A.a.mark((function t(a){var r;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,e.props.match.params.id,console.log("params ---\x3e",e.props.match.params),t.next=6,W(0,e.state.formData);case 6:r=t.sent,console.log("response ---\x3e",r),e.props.history.push("/"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0.response),e.setState({errors:t.t0.response.data.errors});case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(T.a)(A.a.mark((function e(){var t,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,console.log("this.props.match.params ---\x3e",this.props.match.params),e.next=4,Q(t);case 4:a=e.sent,console.log(a),this.setState({item:a.data,user:a.data.owner,formData:{item:a.data.id}}),console.log("response.data.id ---\x3e",a.data.id);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.formData.message,t=this.state.item,a=t.image,n=t.title,s=this.state.user.username;return this.state.item||this.state.formData||this.state.item.owner?Object(r.jsxs)(S.a,{className:"message-form",children:[Object(r.jsx)("h2",{children:"Send a message"}),Object(r.jsx)("h5",{children:n}),Object(r.jsx)("p",{children:s}),Object(r.jsx)(N.a,{className:"upload-thumbnail",src:a}),Object(r.jsxs)(J.a,{onSubmit:this.handleSubmit,children:[Object(r.jsxs)(J.a.Group,{controlId:"formMessage",children:[Object(r.jsx)(J.a.Label,{children:"Message"}),Object(r.jsx)(J.a.Control,{as:"textarea",rows:8,type:"message",name:"message",placeholder:"Enter message to the post owner",value:e,onChange:this.handleChange})]}),Object(r.jsx)(L.a,{variant:"primary",type:"submit",children:"Submit"})]})]}):null}}]),a}(s.a.Component),le=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(r.jsxs)(m.a,{children:[Object(r.jsx)(C,{}),Object(r.jsxs)(u.c,{children:[Object(r.jsx)(u.a,{exact:!0,path:"/",component:P}),Object(r.jsx)(u.a,{path:"/items/:id",component:re}),Object(r.jsx)(u.a,{path:"/items",component:ae}),Object(r.jsx)(u.a,{path:"/threads/:id",component:ie}),Object(r.jsx)(u.a,{path:"/register",component:Z}),Object(r.jsx)(u.a,{path:"/login",component:$}),Object(r.jsx)(u.a,{path:"/upload",component:oe})]}),Object(r.jsx)(U,{})]})}}]),a}(s.a.Component);o.a.render(Object(r.jsx)(le,{}),document.getElementById("root"))},80:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.d15f196f.chunk.js.map